import{r as j,b as N,a as g,A as r,j as s,B as f,C as i,D as y}from"./index-sGzm-zv8.js";function D(){const[c,o]=j.useState({}),t=N(),{adminProductOrders:n}=g(e=>e.orders);j.useEffect(()=>{t(r())},[t]);const v=e=>{const l=c[e];l&&t(f({orderId:e,status:l})).unwrap().then(()=>{i.success(`Order updated to ${l}`),t(r())}).catch(()=>i.error("Failed to update order"))},b=e=>{t(y(e)).unwrap().then(()=>{i.success("Order deleted permanently"),t(r())}).catch(()=>i.error("Failed to delete order"))};return s.jsxs("div",{className:"container mt-4",children:[s.jsx("h2",{className:"mb-3",children:"My Orders"}),(n==null?void 0:n.length)>0?n.map(e=>{var l;return s.jsxs("div",{className:"card mb-3 shadow-sm border-0",children:[s.jsxs("div",{className:"card-header bg-light d-flex justify-content-between align-items-center",children:[s.jsxs("div",{children:[s.jsxs("h6",{className:"mb-1",children:["Order ID: ",e._id]}),s.jsxs("small",{className:"text-muted",children:["Date: ",new Date(e.createdAt).toLocaleString()]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"badge bg-primary text-uppercase me-2",children:(l=e.paymentMethod)==null?void 0:l.toUpperCase()}),s.jsx("span",{className:"badge bg-success text-uppercase",children:e.status})]})]}),s.jsx("div",{className:"card-body",children:e.orderItems.map(a=>{var d,h,u,m,x,p;return s.jsxs("div",{className:"d-flex align-items-center mb-3",children:[s.jsx("img",{loading:"lazy",src:((h=(d=a.product)==null?void 0:d.images)==null?void 0:h[0])||"/placeholder.png",alt:((u=a.product)==null?void 0:u.name)||"product",width:70,className:"me-3 rounded"}),s.jsxs("div",{className:"flex-grow-1",children:[s.jsx("h6",{className:"mb-1",children:(m=a.product)==null?void 0:m.name}),s.jsxs("p",{className:"mb-0",children:[(x=a.product)==null?void 0:x.price," ₹",s.jsxs("span",{className:"ms-3 text-warning",children:["Qty: ",a.quantity]}),((p=a.product)==null?void 0:p.weight)&&s.jsx("span",{className:"ms-3",children:a.product.weight})]})]})]},a.product._id)})}),s.jsxs("div",{className:"card-footer d-flex justify-content-between align-items-center flex-wrap",children:[s.jsxs("div",{className:"mb-2",children:[s.jsx("strong",{children:"Address:"}),e.address?s.jsxs("div",{className:"ms-2",children:[s.jsx("div",{children:e.address.street}),s.jsxs("div",{children:[e.address.city,", ",e.address.state," - ",e.address.zip]}),s.jsx("div",{children:e.address.country})]}):"No Address"]}),s.jsx("div",{className:"mb-2",children:s.jsxs("select",{disabled:["Cancelled","Delivered"].includes(e==null?void 0:e.status),className:"form-select",value:c[e._id]||e.status,onChange:a=>o(d=>({...d,[e._id]:a.target.value})),children:[s.jsx("option",{value:"Pending",children:"Pending"}),s.jsx("option",{value:"Confirmed",children:"Confirmed"}),s.jsx("option",{value:"Shipped",children:"Shipped"}),s.jsx("option",{value:"Out for Delivery",children:"Out for Delivery"}),s.jsx("option",{value:"Delivered",children:"Delivered"}),s.jsx("option",{value:"Cancelled",children:"Cancelled"}),s.jsx("option",{value:"Returned",children:"Returned"})]})}),s.jsxs("div",{className:"fw-semibold",children:["Total: ",e.totalPrice," ₹"]}),c[e._id]&&s.jsx("button",{className:"btn btn-success",disabled:c[e._id]===e.status,onClick:()=>v(e==null?void 0:e._id),children:"Save"}),["Cancelled","Delivered"].includes(e==null?void 0:e.status)&&s.jsx("button",{className:"btn btn-danger",onClick:()=>b(e==null?void 0:e._id),children:"Delete Order"})]})]},e._id)}):s.jsx("div",{className:"text-center py-5",children:s.jsx("h5",{children:"No orders found"})})]})}export{D as default};
