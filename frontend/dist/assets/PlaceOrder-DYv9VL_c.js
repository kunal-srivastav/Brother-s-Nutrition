import{c as P,b as q,r as u,a as h,j as e,s as p,p as D}from"./index-sGzm-zv8.js";import{u as M}from"./useToastMessage-DvcYMIlM.js";function I(){const x=P(),n=q(),[a,c]=u.useState({houseNo:"",street:"",city:"",country:"",zip:"",paymentMethod:""}),[o,j]=u.useState(!1),{cartItems:r,totalPrice:m}=h(s=>s.carts),{successMsg:f,errorMsg:v}=h(s=>s.messages);M(v,f);const t=s=>{const{name:d,value:i}=s.target;c({...a,[d]:i})},N=async s=>{s.preventDefault();const{houseNo:d,street:i,city:y,country:b,zip:g,paymentMethod:w}=a;if(!d||!i||!y||!b||!g||!w){n(p("All fields are required"));return}const k=r==null?void 0:r.map(l=>({product:l.product._id,quantity:l.quantity}));try{j(!0),await n(D({deliveryData:a,orderItems:k,totalPrice:m})).unwrap(),c({houseNo:"",street:"",city:"",country:"",zip:"",paymentMethod:""}),x("/orders")}catch(l){const C=(l==null?void 0:l.message)||"Failed to place order";n(p(C))}};return e.jsx("div",{className:"row mt-2 g-4",children:(r==null?void 0:r.length)>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-md-6 order-md-last",children:e.jsxs("div",{className:"card shadow-lg rounded-4 p-4 mb-4 border-0",style:{backgroundColor:"#f8f9fa"},children:[e.jsxs("h4",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx("span",{className:"text-primary",children:"Cart Totals"}),e.jsx("span",{className:"badge bg-primary rounded-pill fs-6",children:r.length})]}),e.jsx("ul",{className:"list-group list-group-flush mb-4",children:r.map(s=>e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center border-0 px-0 py-3",style:{borderBottom:"1px solid #e0e0e0",transition:"all 0.3s",borderRadius:"0.5rem"},children:[e.jsxs("span",{className:"fw-semibold",children:[s.product.name," × ",s.quantity]}),e.jsxs("span",{className:"fw-bold text-success",children:["₹",s.product.finalPrice*s.quantity]})]},s.product._id))}),e.jsxs("div",{className:"d-flex justify-content-between fw-bold fs-5 mb-4 border-top pt-3",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{className:"text-dark",children:["₹",m]})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card shadow-lg rounded-4 p-4 border-0",style:{backgroundColor:"#fefefe"},children:[e.jsx("h4",{className:"mb-4",children:"Delivery Information"}),e.jsxs("form",{className:"needs-validation",noValidate:!0,onSubmit:N,children:[e.jsxs("div",{className:"mb-3 form-floating",children:[e.jsx("input",{type:"text",className:"form-control shadow-sm",id:"addressInput",placeholder:"House / Apartment No.",name:"houseNo",value:a.houseNo,onChange:t,required:!0}),e.jsx("label",{htmlFor:"addressInput",children:"House / Apartment No."}),e.jsx("div",{className:"invalid-feedback",children:"Please enter your house/apartment number."})]}),e.jsxs("div",{className:"mb-3 form-floating",children:[e.jsx("input",{type:"text",className:"form-control shadow-sm",id:"streetInput",placeholder:"Street",name:"street",value:a.street,onChange:t,required:!0}),e.jsx("label",{htmlFor:"streetInput",children:"Street"}),e.jsx("div",{className:"invalid-feedback",children:"Please enter your street."})]}),e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-md-5",children:[e.jsxs("select",{className:"form-select shadow-sm",id:"country",name:"country",value:a.country,onChange:t,required:!0,children:[e.jsx("option",{value:"",children:"Choose..."}),e.jsx("option",{value:"India",children:"India"}),e.jsx("option",{value:"Singapore",children:"Singapore"})]}),e.jsx("div",{className:"invalid-feedback",children:"Please select a valid country."})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsxs("select",{className:"form-select shadow-sm",id:"state",name:"city",value:a.city,onChange:t,required:!0,children:[e.jsx("option",{value:"",children:"Choose..."}),e.jsx("option",{value:"Delhi",children:"Delhi"}),e.jsx("option",{value:"Uttar Pradesh",children:"Uttar Pradesh"})]}),e.jsx("div",{className:"invalid-feedback",children:"Please provide a valid state."})]}),e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:"form-control shadow-sm",id:"zipInput",name:"zip",placeholder:"Zip",value:a.zip,onChange:t,required:!0}),e.jsx("label",{htmlFor:"zipInput",children:"Zip"}),e.jsx("div",{className:"invalid-feedback",children:"Zip code required."})]})})]}),e.jsx("h5",{className:"my-3",children:"Payment"}),e.jsx("div",{className:"d-flex flex-column gap-3 mb-4",children:["cod","credit","paypal"].map(s=>e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input shadow-sm",type:"radio",name:"paymentMethod",id:s,value:s,checked:a.paymentMethod===s,onChange:t,required:!0}),e.jsx("label",{className:"form-check-label text-capitalize fw-medium",htmlFor:s,children:s==="cod"?"Cash on Delivery":s})]},s))}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"submit",className:"btn btn-dark rounded-pill px-5 py-2 shadow-sm hover-scale",disabled:o,children:o?"Placing Order...":"Place Order"})})]})]})})]}):e.jsx("h1",{children:"No Products in cart"})})}export{I as default};
