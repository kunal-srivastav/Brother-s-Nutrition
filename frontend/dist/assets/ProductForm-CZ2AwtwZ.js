const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FormSpinnerWrapper-ClXTFahR.js","assets/index-sGzm-zv8.js","assets/index-DQt1lWaP.css"])))=>i.map(i=>d[i]);
import{k as S,c as k,r as p,b as C,a as F,j as e,R as A,_ as z,w as D,x as O,s as I}from"./index-sGzm-zv8.js";import{u as _}from"./useToastMessage-DvcYMIlM.js";import{I as B}from"./Icons-DCsXMgab.js";const M=A.lazy(()=>z(()=>import("./FormSpinnerWrapper-ClXTFahR.js"),__vite__mapDeps([0,1,2])));function q(){const{productId:t}=S(),v=k(),[g,c]=p.useState([null,null,null,null]),[o,d]=p.useState([null,null,null,null]),[s,u]=p.useState({name:"",description:"",category:"",weight:"",brand:"",servingSize:"",price:"",discount:"",stock:"",isAvailable:!0}),x=C(),{loading:j,errorMsg:b,successMsg:f,adminProducts:r}=F(a=>a.products);p.useEffect(()=>{if(t&&r){const a=r==null?void 0:r.find(n=>(n==null?void 0:n._id)===t);a&&(u({name:(a==null?void 0:a.name)||"",description:(a==null?void 0:a.description)||"",category:(a==null?void 0:a.category)||"",weight:(a==null?void 0:a.weight)||"",brand:(a==null?void 0:a.brand)||"",servingSize:(a==null?void 0:a.servingSize)||"",price:(a==null?void 0:a.price)||"",discount:(a==null?void 0:a.discount)||"",stock:(a==null?void 0:a.stock)||"",isAvailable:(a==null?void 0:a.isAvailable)||!0}),d(a==null?void 0:a.images),c(a==null?void 0:a.images))}},[t,r]),_(b,f);const l=a=>{const{name:n,value:i,type:m,checked:h}=a.target;u({...s,[n]:m==="checkbox"?h:i})},N=(a,n)=>{const i=a.target.files[0];if(!i)return;const m=[...g],h=[...o];m[n]=i,h[n]=URL.createObjectURL(i),c(m),d(h),a.target.value=""},w=a=>{const n=[...g],i=[...o];n[a]=null,i[a]=null,c(n),d(i)},y=async a=>{a.preventDefault();const n=new FormData;n.append("name",s.name),n.append("description",s.description),n.append("category",s.category),n.append("weight",s.weight),n.append("brand",s.brand),n.append("servingSize",String(s.servingSize)),n.append("price",String(s.price)),n.append("discount",String(s.discount)),n.append("stock",String(s.stock)),n.append("isAvailable",String(s.isAvailable)),g.forEach(i=>{i&&n.append("images",i)});try{t?await x(D({productId:t,formData:n})).unwrap():await x(O(n)).unwrap(),u({name:"",description:"",category:"",weight:"",servingSize:"",price:"",discount:"",stock:"",isAvailable:!0}),c([null,null,null,null]),d([null,null,null,null]),v("/admin")}catch(i){x(I(i||"Something went wrong"))}};return e.jsx("div",{className:"d-flex justify-content-center align-items-center mt-2 pb-5",children:e.jsx(M,{loading:j,children:e.jsx("div",{className:"card shadow-lg border-0 rounded-4 mx-auto",style:{maxWidth:"700px",width:"100%"},children:e.jsxs("div",{className:"card-body p-5",children:[e.jsx("h2",{className:"fw-bold text-primary mb-4 text-center",children:t?"Update Product":"Create Product"}),e.jsx("p",{className:"fw-semibold mb-2",children:"Upload Images"}),e.jsx("div",{className:"d-flex flex-wrap gap-3 mb-4",children:o==null?void 0:o.map((a,n)=>e.jsx("div",{className:"position-relative bg-light border border-dashed rounded-3 d-flex justify-content-center align-items-center",style:{width:"100px",height:"100px",cursor:"pointer"},children:a?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:a,loading:"lazy",alt:"preview",className:"w-100 h-100 object-fit-cover rounded-3"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-transparent position-absolute top-0 end-0 rounded-circle",onClick:()=>w(n),children:"×"})]}):e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:`fileInput-${n}`,className:"w-100 h-100 d-flex justify-content-center align-items-center",children:e.jsx(B,{name:"FolderUp",size:35,color:"#6c757d"})}),e.jsx("input",{id:`fileInput-${n}`,type:"file",accept:"image/*",hidden:!0,onChange:i=>N(i,n)})]})},n))}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"form-floating mb-3",children:[e.jsx("input",{type:"text",className:"form-control",id:"productName",name:"name",value:s.name,onChange:l,placeholder:"Product Name",required:!0}),e.jsx("label",{htmlFor:"productName",children:"Product Name"})]}),e.jsxs("div",{className:"form-floating mb-3",children:[e.jsx("textarea",{className:"form-control",id:"productDescription",name:"description",value:s.description,onChange:l,placeholder:"Product Description",style:{height:"100px"},required:!0}),e.jsx("label",{htmlFor:"productDescription",children:"Product Description"})]}),e.jsxs("div",{className:"row g-3 mb-3",children:[e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select",id:"category",name:"category",value:s.category,onChange:l,required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"BCAA",children:"BCAA"}),e.jsx("option",{value:"Creatine",children:"Creatine"}),e.jsx("option",{value:"Fat-Burner",children:"Fat Burner"}),e.jsx("option",{value:"Multivitamins",children:"Multivitamins"}),e.jsx("option",{value:"Omega-3",children:"Omega 3"}),e.jsx("option",{value:"Pre-Workout",children:"Pre-Workout"}),e.jsx("option",{value:"Protein",children:"Protein"}),e.jsx("option",{value:"Weight Gainer",children:"Weight Gainer"}),e.jsx("option",{value:"Other",children:"Other"})]}),e.jsx("label",{htmlFor:"category",children:"Category"})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select",id:"brand",name:"brand",value:s.brand||"",onChange:l,required:!0,children:[e.jsx("option",{value:"",children:"Select Brand"}),e.jsx("option",{value:"MuscleBlaze",children:"MuscleBlaze"}),e.jsx("option",{value:"ON",children:"ON"}),e.jsx("option",{value:"GNC",children:"GNC"}),e.jsx("option",{value:"Other",children:"Other"})]}),e.jsx("label",{htmlFor:"brand",children:"Brand"})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select",id:"weight",name:"weight",value:s.weight,onChange:l,required:!0,children:[e.jsx("option",{value:"",children:"Select Weight"}),e.jsx("option",{value:"250g",children:"250 g"}),e.jsx("option",{value:"500g",children:"500 g"}),e.jsx("option",{value:"1kg",children:"1 kg"}),e.jsx("option",{value:"3kg",children:"3 kg"}),e.jsx("option",{value:"5kg",children:"5 kg"})]}),e.jsx("label",{htmlFor:"weight",children:"Weight"})]})})]}),e.jsxs("div",{className:"row g-3 mb-3",children:[e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{min:0,max:1e4,type:"number",className:"form-control",name:"price",value:s.price,onChange:l,required:!0}),e.jsx("label",{children:"Price (₹)"})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"number",className:"form-control",name:"servingSize",value:s.servingSize,onChange:l}),e.jsx("label",{children:"Serving Size"})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"number",className:"form-control",name:"discount",value:s.discount,onChange:l}),e.jsx("label",{children:"Discount (%)"})]})})]}),e.jsxs("div",{className:"form-floating mb-3",children:[e.jsx("input",{type:"number",className:"form-control",name:"stock",value:s.stock,onChange:l}),e.jsx("label",{children:"Stock"})]}),e.jsxs("div",{className:"form-check mb-4",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",id:"availableNow",name:"isAvailable",checked:s.isAvailable,onChange:l}),e.jsx("label",{className:"form-check-label",htmlFor:"availableNow",children:"Available Now"})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-100 py-2 fw-semibold rounded-pill shadow-sm",children:t?"Update Product":"Add Product"})]})]})})})})}export{q as default};
