const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FormSpinnerWrapper-ClXTFahR.js","assets/index-sGzm-zv8.js","assets/index-DQt1lWaP.css"])))=>i.map(i=>d[i]);
import{r as o,b as j,a as g,j as a,L as v,R as y,_ as N,v as k,s as w}from"./index-sGzm-zv8.js";import{u as P}from"./useToastMessage-DvcYMIlM.js";const R=y.lazy(()=>N(()=>import("./FormSpinnerWrapper-ClXTFahR.js"),__vite__mapDeps([0,1,2])));function C(){const l=o.useRef(null),[r,c]=o.useState(null),[m,i]=o.useState(!1),d=j(),{loggedInUser:e,errorMsg:u,successMsg:p,loading:t}=g(s=>s.users);P(u,p);const h=async()=>{l.current.click()},x=s=>{const n=s.target.files[0];if(!n)return;const f=URL.createObjectURL(n);c(f)},b=async()=>{const s=new FormData;s.append("newAvatar",l.current.files[0]);try{await d(k(s)).unwrap(),c(null),l.current.value=null,i(!1)}catch(n){d(w(n||"Failed to update profile picture"))}};return a.jsxs(a.Fragment,{children:[e?a.jsx("button",{type:"button",className:"btn p-0",onClick:()=>{i(!0)},children:a.jsx("img",{src:(e==null?void 0:e.avatar)||"./defaultPic.webp",loading:"lazy",width:35,height:35,className:"rounded-circle",alt:"User Avatar"})}):a.jsx(v,{to:"/login",className:"btn btn-sm btn-dark",children:"Login"}),a.jsx("input",{type:"file",accept:"image/*",ref:l,style:{display:"none"},onChange:x}),m&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal d-block",tabIndex:"-1",children:a.jsx(R,{loading:t,children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",children:a.jsxs("div",{className:"modal-content p-3 text-center",children:[a.jsx("div",{className:"modal-header border-0",children:a.jsx("button",{type:"button",className:"btn-close",onClick:()=>!t&&i(!1),disabled:t})}),a.jsxs("div",{className:"modal-body position-relative",children:[a.jsx("img",{loading:"lazy",src:r||(e==null?void 0:e.avatar),className:"rounded-circle img-fluid",style:{maxWidth:"400px",maxHeight:"400px"},alt:"User Full Avatar"}),a.jsx("button",{className:"btn btn-primary position-absolute bottom-0 end-0 m-2",onClick:r?b:h,disabled:t,children:t?"Processing...":r?"Update":"Edit"})]})]})})})})]})]})}export{C as default};
