const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FormSpinnerWrapper-ClXTFahR.js","assets/index-sGzm-zv8.js","assets/index-DQt1lWaP.css"])))=>i.map(i=>d[i]);
import{c as w,r as i,b as v,a as N,j as e,R as S,L as R,_ as C,s as d,d as P}from"./index-sGzm-zv8.js";import{u as _}from"./useToastMessage-DvcYMIlM.js";const D=S.lazy(()=>C(()=>import("./FormSpinnerWrapper-ClXTFahR.js"),__vite__mapDeps([0,1,2])));function L(){const u=w(),[s,c]=i.useState({name:"",email:"",password:""}),[p,m]=i.useState(null),r=i.useRef(null),l=v(),{errorMsg:h,successMsg:g,loading:f}=N(t=>t.users);_(h,g);const x=()=>{r.current.click()},j=t=>{const a=t.target.files[0];if(!a)return;const n=URL.createObjectURL(a);m(n)},o=t=>{const{name:a,value:n}=t.target;c(b=>({...b,[a]:n}))},y=async t=>{if(t.preventDefault(),s.password.length<6){l(d("Password must be at least 6 characters"));return}const a=new FormData;a.append("name",s.name),a.append("email",s.email),a.append("avatar",r.current.files[0]),a.append("password",s.password);try{await l(P(a)).unwrap(),c({name:"",email:"",password:""}),m(null),setTimeout(()=>{u("/")},3e3)}catch(n){l(d(n||"Registration failed"))}};return e.jsx("div",{className:"d-flex justify-content-center mt-5",children:e.jsx(D,{loading:f,children:e.jsxs("form",{method:"post",onSubmit:y,className:"p-3 p-md-5 border rounded-3 bg-body-tertiary text-center",children:[e.jsx("h2",{className:"",children:"Sign Up"}),e.jsx("img",{src:p||"./defaultPic.webp",loading:"lazy",alt:"",className:"rounded-circle my-3",onClick:x,width:100,height:100}),e.jsx("input",{type:"file",accept:"image/*",ref:r,style:{display:"none"},onChange:j}),e.jsxs("div",{className:"form-floating mb-3",children:[e.jsx("input",{type:"text",className:"form-control",value:s.name,required:!0,placeholder:"name",name:"name",onChange:o}),e.jsx("label",{htmlFor:"floatingInput",children:"Name"})]}),e.jsxs("div",{className:"form-floating mb-3",children:[e.jsx("input",{type:"email",name:"email",className:"form-control",required:!0,value:s.email,id:"floatingInput",placeholder:"name@example.com",onChange:o}),e.jsx("label",{htmlFor:"floatingInput",children:"Email address"})]}),e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"password",name:"password",minLength:6,required:!0,className:"form-control",value:s.password,id:"floatingPassword",placeholder:"Password",onChange:o}),e.jsx("label",{htmlFor:"floatingPassword",children:"Password"})]}),e.jsx("div",{className:"mb-3",children:e.jsx(R,{to:"/login",className:"float-end",children:"Already have an account?"})}),e.jsx("button",{className:"w-100 btn btn-lg btn-primary mt-3",type:"submit",children:"Sign up"}),e.jsx("hr",{className:"my-4"}),e.jsx("small",{className:"text-body-secondary",children:"By clicking Sign up, you agree to the terms of use."})]})})})}export{L as default};
